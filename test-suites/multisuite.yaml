attacknetConfig:
  grafanaPodName: grafana
  grafanaPodPort: 3000
  waitBeforeInjectionSeconds: 0
  reuseDevnetBetweenRuns: true
  existingDevnetNamespace: kt-ethereum
  allowPostFaultInspection: true

harnessConfig:
  networkPackage: github.com/kurtosis-tech/ethereum-package
  networkConfig: reth.yaml
  networkType: ethereum

testConfig:
  tests:
  - testName: Perform clock skew on reth/teku validator
    health:
      enableChecks: true
      gracePeriod: 120s
    planSteps:
    - stepType: injectFault
      description: "inject clock skew on CL"
      chaosFaultSpec:
        kind: TimeChaos
        apiVersion: chaos-mesh.org/v1alpha1
        spec:
          selector:
            labelSelectors:
              kurtosistech.com/id: cl-6-lodestar-reth
          mode: all
          action: delay
          timeOffset: '-10m'
          duration: 15m
    - stepType: injectFault
      description: "inject clock skew on CL validator"
      chaosFaultSpec:
        kind: TimeChaos
        apiVersion: chaos-mesh.org/v1alpha1
        spec:
          selector:
            labelSelectors:
              kurtosistech.com/id: cl-6-lodestar-reth-validator
          mode: all
          action: delay
          timeOffset: '-10m'
          duration: 15m
    - stepType: injectFault
      description: "inject clock skew on EL"
      chaosFaultSpec:
        kind: TimeChaos
        apiVersion: chaos-mesh.org/v1alpha1
        spec:
          selector:
            labelSelectors:
              kurtosistech.com/id: el-6-reth-lodestar
          mode: all
          action: delay
          timeOffset: '-10m'
          duration: 15m
    - stepType: waitForFaultCompletion
      description: "wait for faults to terminate"
