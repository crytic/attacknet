attacknetConfig:
    grafanaPodName: grafana
    grafanaPodPort: "3000"
    allowPostFaultInspection: false
    waitBeforeInjectionSeconds: 0
    reuseDevnetBetweenRuns: true
    existingDevnetNamespace: kt-ethereum
harnessConfig:
    networkType: ethereum
    networkPackage: github.com/kurtosis-tech/ethereum-package
    networkConfig: plan/testing.yaml
testConfig:
    tests:
        - testName: Apply -2m clock skew for 10m against 1 targets
          planSteps:
            - stepType: injectFault
              description: 'Inject clock skew on target reth/teku Node (Node #2)'
              chaosFaultSpec:
                apiVersion: chaos-mesh.org/v1alpha1
                kind: TimeChaos
                spec:
                    action: delay
                    duration: 10m
                    mode: all
                    selector:
                        expressionSelectors:
                            - key: kurtosistech.com/id
                              operator: In
                              values:
                                - el-2-reth-teku
                                - cl-2-teku-reth
                    timeOffset: -2m
            - stepType: waitForFaultCompletion
              description: wait for faults to terminate
          health:
            enableChecks: true
            gracePeriod: 2m0s
        - testName: Apply -2m clock skew for 10m against 3 targets
          planSteps:
            - stepType: injectFault
              description: 'Inject clock skew on target reth/teku Node (Node #2)'
              chaosFaultSpec:
                apiVersion: chaos-mesh.org/v1alpha1
                kind: TimeChaos
                spec:
                    action: delay
                    duration: 10m
                    mode: all
                    selector:
                        expressionSelectors:
                            - key: kurtosistech.com/id
                              operator: In
                              values:
                                - el-2-reth-teku
                                - cl-2-teku-reth
                    timeOffset: -2m
            - stepType: injectFault
              description: 'Inject clock skew on target reth/lodestar Node (Node #3)'
              chaosFaultSpec:
                apiVersion: chaos-mesh.org/v1alpha1
                kind: TimeChaos
                spec:
                    action: delay
                    duration: 10m
                    mode: all
                    selector:
                        expressionSelectors:
                            - key: kurtosistech.com/id
                              operator: In
                              values:
                                - el-3-reth-lodestar
                                - cl-3-lodestar-reth
                                - cl-3-lodestar-reth-validator
                    timeOffset: -2m
            - stepType: injectFault
              description: 'Inject clock skew on target reth/lighthouse Node (Node #4)'
              chaosFaultSpec:
                apiVersion: chaos-mesh.org/v1alpha1
                kind: TimeChaos
                spec:
                    action: delay
                    duration: 10m
                    mode: all
                    selector:
                        expressionSelectors:
                            - key: kurtosistech.com/id
                              operator: In
                              values:
                                - el-4-reth-lighthouse
                                - cl-4-lighthouse-reth
                                - cl-4-lighthouse-reth-validator
                    timeOffset: -2m
            - stepType: waitForFaultCompletion
              description: wait for faults to terminate
          health:
            enableChecks: true
            gracePeriod: 2m0s
        - testName: Apply -2m clock skew for 10m against 4 targets
          planSteps:
            - stepType: injectFault
              description: 'Inject clock skew on target reth/teku Node (Node #2)'
              chaosFaultSpec:
                apiVersion: chaos-mesh.org/v1alpha1
                kind: TimeChaos
                spec:
                    action: delay
                    duration: 10m
                    mode: all
                    selector:
                        expressionSelectors:
                            - key: kurtosistech.com/id
                              operator: In
                              values:
                                - el-2-reth-teku
                                - cl-2-teku-reth
                    timeOffset: -2m
            - stepType: injectFault
              description: 'Inject clock skew on target reth/lodestar Node (Node #3)'
              chaosFaultSpec:
                apiVersion: chaos-mesh.org/v1alpha1
                kind: TimeChaos
                spec:
                    action: delay
                    duration: 10m
                    mode: all
                    selector:
                        expressionSelectors:
                            - key: kurtosistech.com/id
                              operator: In
                              values:
                                - el-3-reth-lodestar
                                - cl-3-lodestar-reth
                                - cl-3-lodestar-reth-validator
                    timeOffset: -2m
            - stepType: injectFault
              description: 'Inject clock skew on target reth/lighthouse Node (Node #4)'
              chaosFaultSpec:
                apiVersion: chaos-mesh.org/v1alpha1
                kind: TimeChaos
                spec:
                    action: delay
                    duration: 10m
                    mode: all
                    selector:
                        expressionSelectors:
                            - key: kurtosistech.com/id
                              operator: In
                              values:
                                - el-4-reth-lighthouse
                                - cl-4-lighthouse-reth
                                - cl-4-lighthouse-reth-validator
                    timeOffset: -2m
            - stepType: injectFault
              description: 'Inject clock skew on target reth/prysm Node (Node #5)'
              chaosFaultSpec:
                apiVersion: chaos-mesh.org/v1alpha1
                kind: TimeChaos
                spec:
                    action: delay
                    duration: 10m
                    mode: all
                    selector:
                        expressionSelectors:
                            - key: kurtosistech.com/id
                              operator: In
                              values:
                                - el-5-reth-prysm
                                - cl-5-prysm-reth
                                - cl-5-prysm-reth-validator
                    timeOffset: -2m
            - stepType: waitForFaultCompletion
              description: wait for faults to terminate
          health:
            enableChecks: true
            gracePeriod: 2m0s
        - testName: Apply -2m clock skew for 10m against 1 targets
          planSteps:
            - stepType: injectFault
              description: 'Inject clock skew on target reth client of reth/teku Node (Node #2)'
              chaosFaultSpec:
                apiVersion: chaos-mesh.org/v1alpha1
                kind: TimeChaos
                spec:
                    action: delay
                    duration: 10m
                    mode: all
                    selector:
                        expressionSelectors:
                            - key: kurtosistech.com/id
                              operator: In
                              values:
                                - el-2-reth-teku
                    timeOffset: -2m
            - stepType: waitForFaultCompletion
              description: wait for faults to terminate
          health:
            enableChecks: true
            gracePeriod: 2m0s
        - testName: Apply -2m clock skew for 10m against 3 targets
          planSteps:
            - stepType: injectFault
              description: 'Inject clock skew on target reth client of reth/teku Node (Node #2)'
              chaosFaultSpec:
                apiVersion: chaos-mesh.org/v1alpha1
                kind: TimeChaos
                spec:
                    action: delay
                    duration: 10m
                    mode: all
                    selector:
                        expressionSelectors:
                            - key: kurtosistech.com/id
                              operator: In
                              values:
                                - el-2-reth-teku
                    timeOffset: -2m
            - stepType: injectFault
              description: 'Inject clock skew on target reth client of reth/lodestar Node (Node #3)'
              chaosFaultSpec:
                apiVersion: chaos-mesh.org/v1alpha1
                kind: TimeChaos
                spec:
                    action: delay
                    duration: 10m
                    mode: all
                    selector:
                        expressionSelectors:
                            - key: kurtosistech.com/id
                              operator: In
                              values:
                                - el-3-reth-lodestar
                    timeOffset: -2m
            - stepType: injectFault
              description: 'Inject clock skew on target reth client of reth/lighthouse Node (Node #4)'
              chaosFaultSpec:
                apiVersion: chaos-mesh.org/v1alpha1
                kind: TimeChaos
                spec:
                    action: delay
                    duration: 10m
                    mode: all
                    selector:
                        expressionSelectors:
                            - key: kurtosistech.com/id
                              operator: In
                              values:
                                - el-4-reth-lighthouse
                    timeOffset: -2m
            - stepType: waitForFaultCompletion
              description: wait for faults to terminate
          health:
            enableChecks: true
            gracePeriod: 2m0s
        - testName: Apply -2m clock skew for 10m against 4 targets
          planSteps:
            - stepType: injectFault
              description: 'Inject clock skew on target reth client of reth/teku Node (Node #2)'
              chaosFaultSpec:
                apiVersion: chaos-mesh.org/v1alpha1
                kind: TimeChaos
                spec:
                    action: delay
                    duration: 10m
                    mode: all
                    selector:
                        expressionSelectors:
                            - key: kurtosistech.com/id
                              operator: In
                              values:
                                - el-2-reth-teku
                    timeOffset: -2m
            - stepType: injectFault
              description: 'Inject clock skew on target reth client of reth/lodestar Node (Node #3)'
              chaosFaultSpec:
                apiVersion: chaos-mesh.org/v1alpha1
                kind: TimeChaos
                spec:
                    action: delay
                    duration: 10m
                    mode: all
                    selector:
                        expressionSelectors:
                            - key: kurtosistech.com/id
                              operator: In
                              values:
                                - el-3-reth-lodestar
                    timeOffset: -2m
            - stepType: injectFault
              description: 'Inject clock skew on target reth client of reth/lighthouse Node (Node #4)'
              chaosFaultSpec:
                apiVersion: chaos-mesh.org/v1alpha1
                kind: TimeChaos
                spec:
                    action: delay
                    duration: 10m
                    mode: all
                    selector:
                        expressionSelectors:
                            - key: kurtosistech.com/id
                              operator: In
                              values:
                                - el-4-reth-lighthouse
                    timeOffset: -2m
            - stepType: injectFault
              description: 'Inject clock skew on target reth client of reth/prysm Node (Node #5)'
              chaosFaultSpec:
                apiVersion: chaos-mesh.org/v1alpha1
                kind: TimeChaos
                spec:
                    action: delay
                    duration: 10m
                    mode: all
                    selector:
                        expressionSelectors:
                            - key: kurtosistech.com/id
                              operator: In
                              values:
                                - el-5-reth-prysm
                    timeOffset: -2m
            - stepType: waitForFaultCompletion
              description: wait for faults to terminate
          health:
            enableChecks: true
            gracePeriod: 2m0s
